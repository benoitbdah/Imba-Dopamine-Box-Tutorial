{"id":"u","warnings":[],"errors":[],"js":"// @ts-ignore\nfunction isa$(a,b){ return typeof b === \"string\" ? (typeof a === b) : b[Symbol.hasInstance]?.(a) };\nfunction iter$__(a){ let v; return a ? ((v=a.toIterable) ? v.call(a) : a) : a; };\nimport {register$} from 'imba/runtime';\nconst $getSlot$ = Symbol.for('#getSlot'), $container$ = Symbol.for('#container'), $afterVisit$ = Symbol.for('#afterVisit'), $__init__$ = Symbol.for('#__init__'), $listeners$ = Symbol.for('#listeners'), $slot$ = Symbol.for('#slot'), $parent$ = Symbol.for('#parent'), $$container$ = Symbol.for('##container'), $domTarget$ = Symbol.for('#domTarget'), $insertInto$ = Symbol.for('#insertInto'), $removeFrom$ = Symbol.for('#removeFrom'), $teleport$ = Symbol.for('#teleport'), $self$ = Symbol.for('#self'), $target$ = Symbol.for('#target');\n\n/*body*/\n// imba$stdlib=1\nimport {Element} from './core';\nimport {Component} from './component.imba';\nimport {createSlot} from './fragment';\n\nlet c$0 = Symbol();\nclass TeleportHook extends Component {\n\tconstructor(){\n\t\tsuper(...arguments);\n\t\tsuper[$__init__$] || this[$__init__$]();\n\t}\n\t[$__init__$]($$ = null,deep = true,fields = true){\n\t\tdeep && super[$__init__$] && super[$__init__$](...arguments);\n\t\tthis.to = $$ ? $$.to : undefined;\n\t\t\n\t}\n\tbuild(){\n\t\tthis[$listeners$] = [];\n\t\tthis.win = globalThis;\n\t\treturn this.doc = globalThis.document;\n\t}\n\t\n\tsetup(){\n\t\treturn this.setAttribute('style',\"display:none !important;\");\n\t}\n\t\n\t[$getSlot$](name,ctx){\n\t\tthis[$slot$] ||= createSlot(0,this[$parent$]);\n\t\treturn this[$slot$];\n\t}\n\t\n\tget [$container$](){\n\t\t// FIXME the outer container is currently disabled\n\t\tif (!(this[$$container$])) {\n\t\t\tlet classes = this.className;\n\t\t\tthis[$$container$] = this.doc.createElement('div');\n\t\t\tthis[$$container$].className = classes;\n\t\t\tthis[$$container$].style.cssText = \"display:contents !important;\";\n\t\t};\n\t\treturn this[$$container$];\n\t}\n\t\n\tget domTarget(){\n\t\treturn this[$domTarget$] ||= ((isa$(this.to,Element)) ? this.to : ((this.closest(this.to) || this.doc.querySelector(this.to))));\n\t}\n\t\n\tget eventTarget(){\n\t\treturn this.domTarget;\n\t}\n\t\n\tget style(){\n\t\treturn this[$$container$] ? this[$$container$].style : (super.style);\n\t}\n\t\n\tget classList(){\n\t\treturn this[$$container$] ? this[$$container$].classList : (super.classList);\n\t}\n\t\n\tget className(){\n\t\treturn this[$$container$] ? this[$$container$].className : (super.className);\n\t}\n\t\n\tset className(val){\n\t\tthis[$$container$] ? ((this[$$container$].className = val)) : (super.className = val);\n\t}\n\t\n\t[$afterVisit$](){\n\t\tif (this.mountedΦ && this[$slot$] && !(this[$slot$].parentNode)) {\n\t\t\treturn this[$slot$][$insertInto$](this.target);\n\t\t};\n\t}\n\t\n\tmount(){\n\t\tfor (let $1 = 0, $2 = iter$__(this[$listeners$]), $3 = $2.length; $1 < $3; $1++) {\n\t\t\tlet [name,handler,o] = $2[$1];\n\t\t\tthis.eventTarget.addEventListener(name,handler,o);\n\t\t};\n\t\t\n\t\tlet target = this.domTarget;\n\t\t\n\t\tif (this[$slot$]) {\n\t\t\tthis[$slot$][$insertInto$](target);\n\t\t};\n\t\treturn this;\n\t}\n\t\n\tunmount(){\n\t\tfor (let $4 = 0, $5 = iter$__(this[$listeners$]), $6 = $5.length; $4 < $6; $4++) {\n\t\t\tlet [name,handler,o] = $5[$4];\n\t\t\tthis.eventTarget.removeEventListener(name,handler,o);\n\t\t};\n\t\t\n\t\tif (this[$slot$]) {\n\t\t\tthis[$slot$][$removeFrom$](this.domTarget);\n\t\t};\n\t\t\n\t\tthis[$domTarget$] = null;\n\t\treturn this;\n\t}\n\t\n\taddEventListener(name,handler,o = {}){\n\t\thandler[$teleport$] = this;\n\t\thandler[$self$] = this;\n\t\t\n\t\tthis[$listeners$].push([name,handler,o]);\n\t\tif (this.mountedΦ && this.eventTarget?.addEventListener) {\n\t\t\treturn this.eventTarget.addEventListener(name,handler,o);\n\t\t};\n\t}\n\tstatic { register$(this,c$0,'TeleportHook',24) }\n};\n\nlet c$1 = Symbol();\nclass GlobalHook extends TeleportHook {\n\tget domTarget(){\n\t\treturn this.doc.body;\n\t}\n\t\n\tget eventTarget(){\n\t\treturn this.win;\n\t}\n\t\n\taddEventListener(name,handler,o = {}){\n\t\thandler[$target$] = this.domTarget.parentNode;\n\t\treturn super.addEventListener(...arguments);\n\t}\n\t\n\ton$resize(mods,scope,handler,o){\n\t\tthis.addEventListener('resize',handler,o);\n\t\treturn handler;\n\t}\n\tstatic { register$(this,c$1,'GlobalHook',8) }\n};\n\nif (globalThis.customElements) {\n\tglobalThis.customElements.define('i-teleport',TeleportHook);\n\tglobalThis.customElements.define('i-global',GlobalHook);\n};\n\nexport function use_dom_teleport(){\n\tglobalThis.imba.uses_dom_teleport = true;\n\treturn true;\n};\n\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVsZXBvcnQuaW1iYSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlbGVwb3J0LmltYmEiXSwic291cmNlc0NvbnRlbnQiOlsiIyBpbWJhJHN0ZGxpYj0xXG5pbXBvcnQge0VsZW1lbnR9IGZyb20gJy4vY29yZSdcbmltcG9ydCB7Q29tcG9uZW50fSBmcm9tICcuL2NvbXBvbmVudC5pbWJhJ1xuaW1wb3J0IHtjcmVhdGVTbG90fSBmcm9tICcuL2ZyYWdtZW50J1xuXG5jbGFzcyBUZWxlcG9ydEhvb2sgPCBDb21wb25lbnRcblx0cHJvcCB0b1xuXG5cdGRlZiBidWlsZFxuXHRcdCNsaXN0ZW5lcnMgPSBbXVxuXHRcdHdpbiA9IGdsb2JhbFxuXHRcdGRvYyA9IGdsb2JhbC5kb2N1bWVudFxuXG5cdGRlZiBzZXR1cFxuXHRcdHNldEF0dHJpYnV0ZSgnc3R5bGUnLFwiZGlzcGxheTpub25lICFpbXBvcnRhbnQ7XCIpXG5cblx0ZGVmICNnZXRTbG90IG5hbWUsIGN0eFxuXHRcdCNzbG90IHx8PSBjcmVhdGVTbG90KDAsI3BhcmVudClcblx0XHRyZXR1cm4gI3Nsb3RcblxuXHRnZXQgI2NvbnRhaW5lclxuXHRcdCMgRklYTUUgdGhlIG91dGVyIGNvbnRhaW5lciBpcyBjdXJyZW50bHkgZGlzYWJsZWRcblx0XHR1bmxlc3MgIyNjb250YWluZXJcblx0XHRcdGxldCBjbGFzc2VzID0gc2VsZi5jbGFzc05hbWVcblx0XHRcdCMjY29udGFpbmVyID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG5cdFx0XHQjI2NvbnRhaW5lci5jbGFzc05hbWUgPSBjbGFzc2VzXG5cdFx0XHQjI2NvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJkaXNwbGF5OmNvbnRlbnRzICFpbXBvcnRhbnQ7XCJcblx0XHRyZXR1cm4gIyNjb250YWluZXJcblxuXHRnZXQgZG9tVGFyZ2V0XG5cdFx0I2RvbVRhcmdldCB8fD0gKHRvIGlzYSBFbGVtZW50ID8gdG8gOiAoc2VsZi5jbG9zZXN0KHRvKSBvciBkb2MucXVlcnlTZWxlY3Rvcih0bykpKVxuXG5cdGdldCBldmVudFRhcmdldFxuXHRcdGRvbVRhcmdldFxuXG5cdGdldCBzdHlsZVxuXHRcdCMjY29udGFpbmVyID8gIyNjb250YWluZXIuc3R5bGUgOiBzdXBlclxuXG5cdGdldCBjbGFzc0xpc3Rcblx0XHQjI2NvbnRhaW5lciA/ICMjY29udGFpbmVyLmNsYXNzTGlzdCA6IHN1cGVyXG5cblx0Z2V0IGNsYXNzTmFtZVxuXHRcdCMjY29udGFpbmVyID8gIyNjb250YWluZXIuY2xhc3NOYW1lIDogc3VwZXJcblxuXHRzZXQgY2xhc3NOYW1lIHZhbFxuXHRcdCMjY29udGFpbmVyID8gKCMjY29udGFpbmVyLmNsYXNzTmFtZT12YWwpIDogc3VwZXJcblxuXHRkZWYgI2FmdGVyVmlzaXRcblx0XHRpZiBtb3VudGVkPyBhbmQgI3Nsb3QgYW5kICEjc2xvdC5wYXJlbnROb2RlXG5cdFx0XHQjc2xvdC4jaW5zZXJ0SW50byh0YXJnZXQpXG5cblx0ZGVmIG1vdW50XG5cdFx0Zm9yIFtuYW1lLGhhbmRsZXIsb10gaW4gI2xpc3RlbmVyc1xuXHRcdFx0ZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLGhhbmRsZXIsbylcblxuXHRcdGxldCB0YXJnZXQgPSBkb21UYXJnZXRcblxuXHRcdGlmICNzbG90XG5cdFx0XHQjc2xvdC4jaW5zZXJ0SW50byh0YXJnZXQpXG5cdFx0cmV0dXJuIHNlbGZcblxuXHRkZWYgdW5tb3VudFxuXHRcdGZvciBbbmFtZSxoYW5kbGVyLG9dIGluICNsaXN0ZW5lcnNcblx0XHRcdGV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSxoYW5kbGVyLG8pXG5cblx0XHRpZiAjc2xvdFxuXHRcdFx0I3Nsb3QuI3JlbW92ZUZyb20oZG9tVGFyZ2V0KVxuXG5cdFx0I2RvbVRhcmdldCA9IG51bGxcblx0XHRyZXR1cm4gc2VsZlxuXG5cdGRlZiBhZGRFdmVudExpc3RlbmVyIG5hbWUsIGhhbmRsZXIsIG8gPSB7fVxuXHRcdGhhbmRsZXIuI3RlbGVwb3J0ID0gc2VsZlxuXHRcdGhhbmRsZXIuI3NlbGYgPSBzZWxmXG5cblx0XHQjbGlzdGVuZXJzLnB1c2goW25hbWUsaGFuZGxlcixvXSlcblx0XHRpZiBtb3VudGVkPyBhbmQgZXZlbnRUYXJnZXQuLmFkZEV2ZW50TGlzdGVuZXJcblx0XHRcdGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIobmFtZSxoYW5kbGVyLG8pXG5cbmNsYXNzIEdsb2JhbEhvb2sgPCBUZWxlcG9ydEhvb2tcblxuXHRnZXQgZG9tVGFyZ2V0XG5cdFx0ZG9jLmJvZHlcblxuXHRnZXQgZXZlbnRUYXJnZXRcblx0XHR3aW5cblxuXHRkZWYgYWRkRXZlbnRMaXN0ZW5lciBuYW1lLCBoYW5kbGVyLCBvID0ge31cblx0XHRoYW5kbGVyLiN0YXJnZXQgPSBkb21UYXJnZXQucGFyZW50Tm9kZVxuXHRcdHN1cGVyXG5cblx0ZGVmIG9uJHJlc2l6ZSBtb2RzLHNjb3BlLCBoYW5kbGVyLCBvXG5cdFx0c2VsZi5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLGhhbmRsZXIsbylcblx0XHRyZXR1cm4gaGFuZGxlclxuXG5pZiBnbG9iYWwuY3VzdG9tRWxlbWVudHNcblx0Z2xvYmFsLmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnaS10ZWxlcG9ydCcsVGVsZXBvcnRIb29rKVxuXHRnbG9iYWwuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdpLWdsb2JhbCcsR2xvYmFsSG9vaylcblxuZXhwb3J0IGRlZiB1c2VfZG9tX3RlbGVwb3J0XG5cdGdsb2JhbC5pbWJhLnVzZXNfZG9tX3RlbGVwb3J0ID0geWVzXG5cdHllc1xuXG5cbmRlY2xhcmUgdGFnIHRlbGVwb3J0XG5cblx0IyBUaGUgZWxlbWVudCAob3Igc2VsZWN0b3IpIHlvdSB3YW50IHRvIGFkZCBsaXN0ZW5lcnMgYW5kIGNvbnRlbnQgdG9cblx0c2V0IHRvIHZhbHVlXFwoc3RyaW5nIHwgRWxlbWVudClcblx0XHR5ZXNcblxuZGVjbGFyZSB0YWcgZ2xvYmFsXG4iXSwi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","css":""}