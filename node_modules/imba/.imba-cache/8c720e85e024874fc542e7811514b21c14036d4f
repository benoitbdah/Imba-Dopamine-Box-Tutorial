{"id":"fh","warnings":[],"errors":[],"js":"// @ts-ignore\nfunction isa$(a,b){ return typeof b === \"string\" ? (typeof a === b) : b[Symbol.hasInstance]?.(a) }\nimport {register$} from 'imba/runtime';\nconst $getQueryParam$ = Symbol.for('#getQueryParam'), $setQueryParam$ = Symbol.for('#setQueryParam'), $query$ = Symbol.for('#query');\n\n/*body*/\n// imba$stdlib=1\nexport const ROUTES = {};\n\nlet c$0 = Symbol();\nexport class Location {\n\tstatic parse(url,router){\n\t\tif (isa$(url,Location)) {\n\t\t\treturn url;\n\t\t};\n\t\treturn new Location(url,router);\n\t}\n\t\n\tconstructor(url,router){\n\t\tthis.router = router;\n\t\tthis.parse(url);\n\t}\n\t\n\tparse(url){\n\t\tlet alias;\n\t\tif (!(isa$(url,URL))) { url = new URL(url,this.router.origin) };\n\t\tif (alias = this.router?.aliases[url.pathname]) {\n\t\t\turl.pathname = alias;\n\t\t};\n\t\tthis.url = url;\n\t\treturn this;\n\t}\n\t\n\tget activeΦ(){\n\t\treturn this.router.location == this;\n\t}\n\t\n\treparse(){\n\t\treturn this.parse(this.url);\n\t}\n\t\n\t// should definitely add match here\n\tget searchParams(){\n\t\treturn this.url.searchParams;\n\t}\n\t\n\tsearch(){\n\t\tlet str = this.searchParams ? this.searchParams.toString() : '';\n\t\treturn str ? (('?' + str)) : '';\n\t}\n\t\n\tupdate(value){\n\t\tif (isa$(value,Object)) {\n\t\t\tfor (let $1 = 0, $2 = Object.keys(value), $3 = $2.length, k, v; $1 < $3; $1++){\n\t\t\t\tk = $2[$1];v = value[k];this.searchParams.set(k,v);\n\t\t\t};\n\t\t} else if (typeof value == 'string') {\n\t\t\tthis.parse(value);\n\t\t};\n\t\treturn this;\n\t}\n\t\n\tclone(){\n\t\treturn new Location(this.url.href,this.router);\n\t}\n\t\n\tequals(other){\n\t\treturn this.toString() == String(other);\n\t}\n\t\n\tget href(){\n\t\treturn this.url.href;\n\t}\n\t\n\tget path(){\n\t\treturn this.url.href.slice(this.url.origin.length);\n\t}\n\t\n\tget pathname(){\n\t\treturn this.url.pathname;\n\t}\n\t\n\tget query(){\n\t\treturn this[$query$] ||= new Proxy({},{\n\t\t\tget: this[$getQueryParam$].bind(this),\n\t\t\tset: this[$setQueryParam$].bind(this)\n\t\t});\n\t}\n\t\n\ttoString(){\n\t\treturn this.href;\n\t}\n\t\n\t[$getQueryParam$](target,name){\n\t\treturn this.searchParams.get(name);\n\t}\n\t\n\t[$setQueryParam$](target,name,value){\n\t\tlet curr = (this[$getQueryParam$](target,name) ?? '');\n\t\tvalue = (value ?? '');\n\t\t\n\t\tif (curr != value) {\n\t\t\tif ((value == null || value == '')) {\n\t\t\t\tthis.searchParams.delete(name);\n\t\t\t} else {\n\t\t\t\tthis.searchParams.set(name,value);\n\t\t\t};\n\t\t\t\n\t\t\tif (this.activeΦ) {\n\t\t\t\t// need to improve how we update the state?\n\t\t\t\tthis.router.history.replaceState({},null,this.path);\n\t\t\t\tthis.router.touch();\n\t\t\t};\n\t\t};\n\t\treturn true;\n\t}\n\tstatic { register$(this,c$0,'Location',16) }\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYXRpb24uaW1iYSIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxvY2F0aW9uLmltYmEiXSwic291cmNlc0NvbnRlbnQiOlsiIyBpbWJhJHN0ZGxpYj0xXG5leHBvcnQgY29uc3QgUk9VVEVTID0ge31cblxuZXhwb3J0IGNsYXNzIExvY2F0aW9uXG5cblx0c3RhdGljIGRlZiBwYXJzZSB1cmwsIHJvdXRlclxuXHRcdGlmIHVybCBpc2EgTG9jYXRpb25cblx0XHRcdHJldHVybiB1cmxcblx0XHRyZXR1cm4gbmV3IExvY2F0aW9uKHVybCxyb3V0ZXIpXG5cblx0ZGVmIGNvbnN0cnVjdG9yIHVybCwgcm91dGVyXG5cdFx0cm91dGVyID0gcm91dGVyXG5cdFx0c2VsZi5wYXJzZSh1cmwpXG5cblx0ZGVmIHBhcnNlIHVybFxuXHRcdHVybCA9IG5ldyBVUkwodXJsLHJvdXRlci5vcmlnaW4pIHVubGVzcyB1cmwgaXNhIFVSTFxuXHRcdGlmIGxldCBhbGlhcyA9IHJvdXRlci4uYWxpYXNlc1t1cmwucGF0aG5hbWVdXG5cdFx0XHR1cmwucGF0aG5hbWUgPSBhbGlhc1xuXHRcdHNlbGYudXJsID0gdXJsXG5cdFx0c2VsZlxuXG5cdGdldCBhY3RpdmU/XG5cdFx0cm91dGVyLmxvY2F0aW9uID09IHNlbGZcblxuXHRkZWYgcmVwYXJzZVxuXHRcdHBhcnNlKHVybClcblxuXHQjIHNob3VsZCBkZWZpbml0ZWx5IGFkZCBtYXRjaCBoZXJlXG5cdGdldCBzZWFyY2hQYXJhbXNcblx0XHR1cmwuc2VhcmNoUGFyYW1zXG5cblx0ZGVmIHNlYXJjaFxuXHRcdGxldCBzdHIgPSBzZWFyY2hQYXJhbXMgPyBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKSA6ICcnXG5cdFx0c3RyID8gKCc/JyArIHN0cikgOiAnJ1xuXG5cdGRlZiB1cGRhdGUgdmFsdWVcblx0XHRpZiB2YWx1ZSBpc2EgT2JqZWN0XG5cdFx0XHRmb3Igb3duIGssdiBvZiB2YWx1ZVxuXHRcdFx0XHRzZWxmLnNlYXJjaFBhcmFtcy5zZXQoayx2KVxuXG5cdFx0ZWxpZiB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZydcblx0XHRcdHNlbGYucGFyc2UodmFsdWUpXG5cdFx0cmV0dXJuIHNlbGZcblxuXHRkZWYgY2xvbmVcblx0XHRuZXcgTG9jYXRpb24odXJsLmhyZWYscm91dGVyKVxuXG5cdGRlZiBlcXVhbHMgb3RoZXJcblx0XHRzZWxmLnRvU3RyaW5nKCkgPT0gU3RyaW5nKG90aGVyKVxuXG5cdGdldCBocmVmXG5cdFx0dXJsLmhyZWZcblxuXHRnZXQgcGF0aFxuXHRcdHVybC5ocmVmLnNsaWNlKHVybC5vcmlnaW4ubGVuZ3RoKVxuXG5cdGdldCBwYXRobmFtZVxuXHRcdHVybC5wYXRobmFtZVxuXG5cdGdldCBxdWVyeVxuXHRcdCNxdWVyeSB8fD0gbmV3IFByb3h5KHt9LHtcblx0XHRcdGdldDogI2dldFF1ZXJ5UGFyYW0uYmluZChzZWxmKVxuXHRcdFx0c2V0OiAjc2V0UXVlcnlQYXJhbS5iaW5kKHNlbGYpXG5cdFx0fSlcblxuXHRkZWYgdG9TdHJpbmdcblx0XHRocmVmXG5cblx0ZGVmICNnZXRRdWVyeVBhcmFtIHRhcmdldCwgbmFtZVxuXHRcdHNlYXJjaFBhcmFtcy5nZXQobmFtZSlcblxuXHRkZWYgI3NldFF1ZXJ5UGFyYW0gdGFyZ2V0LCBuYW1lLCB2YWx1ZVxuXHRcdGxldCBjdXJyID0gI2dldFF1ZXJ5UGFyYW0odGFyZ2V0LG5hbWUpID8/ICcnXG5cdFx0dmFsdWUgPSB2YWx1ZSA/PyAnJ1xuXG5cdFx0aWYgY3VyciAhPSB2YWx1ZVxuXHRcdFx0aWYgKHZhbHVlID09IG51bGwgb3IgdmFsdWUgPT0gJycpXG5cdFx0XHRcdHNlYXJjaFBhcmFtcy5kZWxldGUobmFtZSlcblx0XHRcdGVsc2Vcblx0XHRcdFx0c2VhcmNoUGFyYW1zLnNldChuYW1lLHZhbHVlKVxuXG5cdFx0XHRpZiBhY3RpdmU/XG5cdFx0XHRcdCMgbmVlZCB0byBpbXByb3ZlIGhvdyB3ZSB1cGRhdGUgdGhlIHN0YXRlP1xuXHRcdFx0XHRyb3V0ZXIuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sbnVsbCxwYXRoKVxuXHRcdFx0XHRyb3V0ZXIudG91Y2ghXG5cdFx0cmV0dXJuIHllc1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxNQUFNLENBQU8sTUFBQSxNQUFNLEdBQUcsRUFBRTs7O0FBRXhCLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFBO0NBRXBCLE1BQU0sQ0FBSyxLQUFLLENBQUMsR0FBRyxDQUFFLE1BQU0sQ0FBQTtFQUMzQixFQUFFLEVBQUMsS0FBQSxHQUFHLENBQUssUUFBUSxDQUFBLEVBQUE7R0FDbEIsTUFBTSxDQUFDLEdBQUc7R0FBQTtFQUNYLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7RUFBQTs7Q0FFNUIsV0FBVyxDQUFDLEdBQUcsQ0FBRSxNQUFNLENBQUE7RUFDMUIsS0FBQSxNQUFNLEdBQUcsTUFBTTtFQUNmLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO0VBQUE7O0NBRVosS0FBSyxDQUFDLEdBQUcsQ0FBQTs7RUFDcUIsRUFBTSxFQUFDLEVBQUEsS0FBQSxHQUFHLENBQUssR0FBRyxDQUFBLENBQUEsRUFBbkQsRUFBQSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBQSxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUE7RUFDaEMsRUFBRSxFQUFLLEtBQUssR0FBRyxLQUFBLE1BQU0sRUFBRSxPQUFPLENBQUEsR0FBSSxDQUFDLFFBQVEsQ0FBQyxFQUFBO0dBQzNDLEdBQUcsQ0FBQyxRQUFRLEdBQUcsS0FBSztHQUFBO0VBQ3JCLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRztFQUNkLE9BQUEsSUFBSTtFQUFBOztDQUVMLEdBQUcsQ0FBQyxPQUFPLEVBQUE7RUFDVixPQUFBLEtBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsSUFBSTtFQUFBOztDQUVwQixPQUFPLEVBQUE7RUFDVixPQUFBLEtBQUEsS0FB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","css":""}