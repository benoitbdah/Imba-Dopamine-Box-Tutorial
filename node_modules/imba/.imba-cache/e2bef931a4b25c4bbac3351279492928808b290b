{"id":"ep","warnings":[],"errors":[],"js":"import {register$} from 'imba/runtime';\n\n/*body*/\n// imba$stdlib=1\nimport {Event,CustomEvent,Element} from '../dom/core';\n\nexport function use_events_selection(){\n\tglobalThis.imba.uses_events_selection = true;\n\treturn true;\n};\n\nlet selHandler;\nlet handledSym = Symbol();\n\nfunction activateSelectionHandler(){\n\tif (!(selHandler)) {\n\t\tselHandler = function(e) {\n\t\t\tif (e[handledSym]) { return };\n\t\t\te[handledSym] = true;\n\t\t\t\n\t\t\tlet target = globalThis.document.activeElement;\n\t\t\tif (target && target.matches('input,textarea')) {\n\t\t\t\tlet custom = new CustomEvent('selection',{\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\tstart: target.selectionStart,\n\t\t\t\t\t\tend: target.selectionEnd\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn target.dispatchEvent(custom);\n\t\t\t};\n\t\t};\n\t\treturn globalThis.document.addEventListener('selectionchange',selHandler);\n\t};\n};\n\nlet c$0 = Symbol();\nclass Î©Element {\n\ton$selection(mods,context,handler,o){\n\t\tactivateSelectionHandler();\n\t\tthis.addEventListener('selection',handler,o);\n\t\treturn handler;\n\t}\n\tstatic { register$(this,c$0,'Element',1,Element); }\n};\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0aW9uLmltYmEiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZWxlY3Rpb24uaW1iYSJdLCJzb3VyY2VzQ29udGVudCI6WyIjIGltYmEkc3RkbGliPTFcbmltcG9ydCB7RXZlbnQsQ3VzdG9tRXZlbnQsRWxlbWVudH0gZnJvbSAnLi4vZG9tL2NvcmUnXG5cbmV4cG9ydCBkZWYgdXNlX2V2ZW50c19zZWxlY3Rpb25cblx0Z2xvYmFsLmltYmEudXNlc19ldmVudHNfc2VsZWN0aW9uID0geWVzXG5cdHllc1xuXG5sZXQgc2VsSGFuZGxlclxubGV0IGhhbmRsZWRTeW0gPSBTeW1ib2whXG5cbmRlZiBhY3RpdmF0ZVNlbGVjdGlvbkhhbmRsZXJcblx0dW5sZXNzIHNlbEhhbmRsZXJcblx0XHRzZWxIYW5kbGVyID0gZG8oZSlcblx0XHRcdHJldHVybiBpZiBlW2hhbmRsZWRTeW1dXG5cdFx0XHRlW2hhbmRsZWRTeW1dID0geWVzXG5cblx0XHRcdGxldCB0YXJnZXQgPSBnbG9iYWwuZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuXHRcdFx0aWYgdGFyZ2V0IGFuZCB0YXJnZXQubWF0Y2hlcygnaW5wdXQsdGV4dGFyZWEnKVxuXHRcdFx0XHRsZXQgY3VzdG9tID0gbmV3IEN1c3RvbUV2ZW50KCdzZWxlY3Rpb24nLHtcblx0XHRcdFx0XHRkZXRhaWw6IHtcblx0XHRcdFx0XHRcdHN0YXJ0OiB0YXJnZXQuc2VsZWN0aW9uU3RhcnRcblx0XHRcdFx0XHRcdGVuZDogdGFyZ2V0LnNlbGVjdGlvbkVuZFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0dGFyZ2V0LmRpc3BhdGNoRXZlbnQoY3VzdG9tKVxuXHRcdGdsb2JhbC5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3Rpb25jaGFuZ2UnLHNlbEhhbmRsZXIpXG5cbmV4dGVuZCBjbGFzcyBFbGVtZW50XG5cdGRlZiBvbiRzZWxlY3Rpb24gbW9kcywgY29udGV4dCwgaGFuZGxlcixvXG5cdFx0YWN0aXZhdGVTZWxlY3Rpb25IYW5kbGVyKClcblx0XHRzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGlvbicsaGFuZGxlcixvKVxuXHRcdHJldHVybiBoYW5kbGVyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxNQUFNLEVBQUUsS0FBSyxDQUFDLFdBQVcsQ0FBQyxPQUFPLE9BQU8sYUFBYTs7QUFFckQsTUFBTSxDQUFDLFFBQUcsQ0FBQyxvQkFBb0IsRUFBQTtDQUM5QixVQUFNLENBQUMsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUc7Q0FDdkMsT0FBQSxJQUFHO0NBQUE7O0FBRUEsSUFBQSxVQUFVO0FBQ1YsSUFBQSxVQUFVLEdBQUcsTUFBTSxFQUFDOztBQUV4QixRQUFHLENBQUMsd0JBQXdCLEVBQUE7Q0FDM0IsRUFBTSxFQUFDLEVBQUEsVUFBVSxDQUFBLEVBQUE7RUFDaEIsVUFBVSxHQUFHLFFBQUUsQ0FBQyxDQUFDLEVBQUM7R0FDVixFQUFFLEVBQUMsQ0FBQyxDQUFBLFVBQVcsQ0FBQyxFQUF2QixFQUFBLE1BQU07R0FDTixDQUFDLENBQUEsVUFBVyxDQUFDLEdBQUcsSUFBRzs7R0FFZixJQUFBLE1BQU0sR0FBRyxVQUFNLENBQUMsUUFBUSxDQUFDLGFBQWE7R0FDMUMsRUFBRSxFQUFDLE1BQU0sQ0FBQyxFQUFHLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFBO0lBQ3pDLElBQUEsTUFBTSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDO0tBQ3hDLE1BQU0sRUFBRTtNQUNQLEtBQUssRUFBRSxNQUFNLENBQUMsY0FBYztNQUM1QixHQUFHLEVBQUUsTUFBTSxDQUFDLFlBQVk7TUFDeEI7S0FDRCxDQUFDO0lBQ0YsT0FBQSxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztJQUFBO0dBQUE7RUFDOUIsT0FBQSxVQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQztFQUFBO0NBQUE7OztBQUV6RCxLQUFLLENBQUMsUUFBTyxFQUFBO0NBQ2YsWUFBWSxDQUFDLElBQUksQ0FBRSxPQUFPLENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQTtFQUN4Qyx3QkFBd0IsRUFBRTtFQUMxQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7RUFDNUMsTUFBTSxDQUFDLE9BQU87RUFBQTt5Q0FKSCxPQUFPLENBQUEsQ0FBQTtBQUlKLENBQUE7QUFBQTsifQ==","css":""}